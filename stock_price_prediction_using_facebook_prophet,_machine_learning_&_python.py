# -*- coding: utf-8 -*-
"""Stock Price Prediction Using Facebook Prophet, Machine Learning & Python.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1Jp9HAL3nL1OZA5rEWF3SU63ihMzZg6CB
"""

#Description: Predict the future price of a stock using machine learning, Facebook Propnet and python

#Import the pandas library
import pandas as pd

#Load the data
files.upload()

#Read in the data
df = pd.read_csv('ARTO.JK.csv')
#Show the data
df

#Select the date and price
df = df[['Date', 'Close']]
#Rename the features
df = df.rename(columns={'Date':'ds', 'Close':'y'})
#Show the data
df

#Getting the last 60 rows data and store them into a new variable
last = df[len(df)-60:]
last

#Get all of the rows in the data set except for the last 60 rows of data
df = df[:-60]
df

#Getting the Facebook prophet library
from fbprophet import Prophet
#Creat the Prophet object (model)
fbp = Prophet(daily_seasonality = True)
#Fit or train the model
fbp.fit(df)
future = fbp.make_future_dataframe(periods=360)
forecast = fbp.predict(future)

#Import the facebooks prophnet plotting libraries
from fbprophet.plot import plot_plotly
#plot the data
plot_plotly(fbp, forecast)

#Show the models prediction for 10-18-2021
forecast[forecast.ds == '2021-10-18']['yhat']

#Show the actual value of the stock for 10-18-2021
last[last.ds == '2021-10-18']['y']
